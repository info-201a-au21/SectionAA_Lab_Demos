runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
### start of analysis.R
# load dplyr, ggplot2 packages
library(dplyr)
library(ggplot2)
# load data
data <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
### INTRODUCTION + SUMMARY INFORMATION
## 5 relevant values of interest (variables) using DPLYR skills -- describe them
# ideas:
# total prison population nationwide and in each state (compare to below values of
# back prison pop) in the most recent year (2018)
total_prison_pop_nation_recent <-
data %>%
filter(year == max(year, na.rm = TRUE)) %>%
summarize(
total = sum(total_jail_pop, na.rm = TRUE)
) %>%
select(total)
# the total number of black people in prisons nationwide in the most recent year (2018)
total_black_prisons_pop_nation_recent <-
data %>%
filter(year == max(year, na.rm = TRUE)) %>%
summarize(
total = sum(black_jail_pop, na.rm = TRUE)
) %>%
select(total)
# prop black in prisons nation most recent year (2018)
prop_black_prisons_nation <- total_black_prisons_pop_nation_recent / total_prison_pop_nation_recent
# total prison pop in each state
total_prison_pop_state <-
data %>%
group_by(state) %>%
filter(year == max(year, na.rm = TRUE)) %>%
summarize(
total = sum(total_jail_pop, na.rm = TRUE)
) %>%
select(state, total)
# the total number of black people in prisons in each state in the most recent year (2018)
total_black_prisons_pop_state <-
data %>%
group_by(state) %>%
filter(year == max(year, na.rm = TRUE)) %>%
summarize(
total = sum(black_jail_pop, na.rm = TRUE)
) %>%
select(state, total)
# total black population in nation and total us population most recent year (2018)
total_black_pop_nation <-
data %>%
summarize(
total = sum(black_pop_15to64, na.rm = TRUE)
) %>%
pull(total)
total_pop_nation <-
data %>%
summarize(
total = sum(total_pop, na.rm = TRUE)
) %>%
pull(total)
# prop black in nation
prop_black_total = total_black_pop_nation / total_pop_nation
# add column for proportion of black in prison
# this doesn't add a column?
data <-
data %>%
mutate(prop_black_prison = black_jail_pop / total_jail_pop)
## SUMMARY
# black people account for almost 34% of the jail population nationwide but about 5% of
# the total population
# could find highest black prison pop in a state and then compare to total black pop there
### TRENDS OVER TIME CHART
## create a chart that shows a trend over time of your variable/topic (ggplot)
# ideas:
# maybe something like the number of black people in prisons nationwide compared to white
# maybe something to do with the number of people put in prisons because of a certain
# reason (ICE, federal agencies in general)
# black jail population over time
ggplot(data = data) +
geom_smooth(mapping = aes(x = year, y = black_jail_pop))
# prop of black people in jails vs total jail pop
ggplot(data = data) +
geom_smooth(mapping = aes(x = year, y = prop_black_prison))
# CLEAN: the yearly black jail pop since 1970-2018
# TODO: still need to make title and headings using labs()
# new df to hold the two new cols
yearly_black_jail_pop <-
data %>%
group_by(year) %>%
mutate(black_jail_pop_year = sum(black_jail_pop, na.rm = TRUE)) %>%
mutate(black_prop_jail_pop = mean(prop_black_prison, na.rm = TRUE)) %>%
mutate(jail_pop_year = sum(total_jail_pop, na.rm = TRUE))
# with tally - why isn't this working?
yearly_black_jail_pop1 <-
data %>%
group_by(year) %>%
tally(sum(black_jail_pop, na.rm = TRUE), name = "black_jail_pop_year") %>%
tally(mean(prop_black_prison, na.rm = TRUE), name = "black_prop_jail_pop") %>%
tally(sum(total_jail_pop, na.rm = TRUE), name = "jail_pop_year")
ggplot(data = yearly_black_jail_pop) + # put this in a variable to show on rmd file
geom_smooth(mapping = aes(x = year, y = black_jail_pop_year))
# CLEAN: the yearly proportion of black people in jails compared to the total pop
# TODO: further clean up by multiplying the decimals by 100 and renaming ylabelto "percent"
ggplot(data = yearly_black_jail_pop) +
geom_smooth(mapping = aes(x = year, y = black_prop_jail_pop))
### VARIABLE COMPARISON CHART
## create a chart that shows how two different (continuous) variables are related to each
## each other
# ideas:
# could maybe do a bar graph of sorts showing juvenile/adult black populations in prisons
# could compare year to number of black people in prison (scatter plot or line trend)
# compare number of black people in prison to the total prison population by year
# this would be similar to the chart in the last step, but with an added
# total jail pop line (can say that it's similar to the proportion variable but
# it's a more clear way of showing the comparison)
ggplot(data = yearly_black_jail_pop) +
geom_point(mapping = aes(x = black_jail_pop, y = total_jail_pop))
### MAP
## show how a variable is distributed geographically
# ideas:
# make a heatmap of the locations in the US where black people are in prisons
data <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
View(Demo_ui)
data <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
total_prison_pop_nation_recent <-
data %>%
filter(year == max(year, na.rm = TRUE)) %>%
summarize(
total = sum(total_jail_pop, na.rm = TRUE)
) %>%
select(total)
total_black_prisons_pop_nation_recent <-
data %>%
filter(year == max(year, na.rm = TRUE)) %>%
summarize(
total = sum(black_jail_pop, na.rm = TRUE)
) %>%
select(total)
prop_black_prisons_nation <- total_black_prisons_pop_nation_recent / total_prison_pop_nation_recent
total_prison_pop_state <-
data %>%
group_by(state) %>%
filter(year == max(year, na.rm = TRUE)) %>%
summarize(
total = sum(total_jail_pop, na.rm = TRUE)
) %>%
select(state, total)
total_black_prisons_pop_state <-
data %>%
group_by(state) %>%
filter(year == max(year, na.rm = TRUE)) %>%
summarize(
total = sum(black_jail_pop, na.rm = TRUE)
) %>%
select(state, total)
# total black population in nation and total us population most recent year (2018)
total_black_pop_nation <-
data %>%
summarize(
total = sum(black_pop_15to64, na.rm = TRUE)
) %>%
pull(total)
total_pop_nation <-
data %>%
summarize(
total = sum(total_pop, na.rm = TRUE)
) %>%
pull(total)
# prop black in nation
prop_black_total = total_black_pop_nation / total_pop_nation
# add column for proportion of black in prison
# this doesn't add a column?
data <-
data %>%
mutate(prop_black_prison = black_jail_pop / total_jail_pop)
ggplot(data = data) +
geom_smooth(mapping = aes(x = year, y = black_jail_pop))
data <-
data %>%
drop_na() %>%
mutate(prop_black_prison = black_jail_pop / total_jail_pop)
ggplot(data = data) +
geom_smooth(mapping = aes(x = year, y = prop_black_prison))
ggplot(data = data) +
geom_line(mapping = aes(x = year, y = black_jail_pop))
yearly_black_jail_pop <-
data %>%
group_by(year) %>%
mutate(black_jail_pop_year = sum(black_jail_pop, na.rm = TRUE)) %>%
mutate(black_prop_jail_pop = mean(prop_black_prison, na.rm = TRUE)) %>%
mutate(jail_pop_year = sum(total_jail_pop, na.rm = TRUE))
yearly_black_jail_pop1 <-
data %>%
group_by(year) %>%
tally(sum(black_jail_pop, na.rm = TRUE), name = "black_jail_pop_year") %>%
tally(mean(prop_black_prison, na.rm = TRUE), name = "black_prop_jail_pop") %>%
tally(sum(total_jail_pop, na.rm = TRUE), name = "jail_pop_year")
ggplot(data = yearly_black_jail_pop) + # put this in a variable to show on rmd file
geom_smooth(mapping = aes(x = year, y = black_jail_pop_year))
yearly_black_jail_pop1 <-
data %>%
group_by(year) %>%
tally(sum(black_jail_pop, na.rm = TRUE), name = "black_jail_pop_year") %>%
tally(mean(prop_black_prison, na.rm = TRUE), name = "black_prop_jail_pop") %>%
tally(sum(total_jail_pop, na.rm = TRUE), name = "jail_pop_year")
yearly_black_jail_pop <-
data %>%
group_by(year) %>%
summarise(black_jail_pop_year = sum(black_jail_pop, na.rm = TRUE)) %>%
summarise(black_prop_jail_pop = mean(prop_black_prison, na.rm = TRUE)) %>%
summarise(jail_pop_year = sum(total_jail_pop, na.rm = TRUE))
yearly_black_jails <-
data %>%
group_by(year) %>%
summarise(black_jail_pop_year = sum(black_jail_pop, na.rm = TRUE),
black_prop_jail_pop = mean(prop_black_prison, na.rm = TRUE),
jail_pop_year = sum(total_jail_pop, na.rm = TRUE))%>%
yearly_black_jails <- data %>%
group_by(year, black_jail_pop, prop_black_prison, total_jail_pop) %>%
summarise(black_jail_pop_year = sum(black_jail_pop),
black_prop_jail_pop = mean(prop_black_prison),
jail_pop_year = sum(total_jail_pop))
yearly_black_jails <- data %>%
group_by(year) %>%
summarise(black_jail_pop_year = sum(black_jail_pop),
black_prop_jail_pop = mean(prop_black_prison),
jail_pop_year = sum(total_jail_pop))
ggplot(data = yearly_black_jails) + # put this in a variable to show on rmd file
geom_smooth(mapping = aes(x = year, y = black_jail_pop_year))
yearly_black_jails <- data %>%
group_by(year, black_jail_pop, total_jail_pop) %>%
summarise(black_jail_pop_year = sum(black_jail_pop),
black_prop_jail_pop = mean(prop_black_prison),
jail_pop_year = sum(total_jail_pop))
ggplot(data = yearly_black_jails) + # put this in a variable to show on rmd file
geom_smooth(mapping = aes(x = year, y = black_jail_pop_year))
yearly_black_jails <- data %>%
group_by(year, black_jail_pop, total_jail_pop) %>%
summarise(black_jail_pop_year = sum(black_jail_pop),
black_prop_jail_pop = mean(prop_black_prison),
jail_pop_year = sum(total_jail_pop), .groups = "drop")
ggplot(data = yearly_black_jails) + # put this in a variable to show on rmd file
geom_smooth(mapping = aes(x = year, y = black_jail_pop_year))
ggplot(data = yearly_black_jails) +
geom_point(mapping = aes(x = black_jail_pop, y = total_jail_pop))
ggplot(data = yearly_black_jail_pop) +
geom_smooth(mapping = aes(x = year, y = black_prop_jail_pop))
ggplot(data = yearly_black_jails) +
geom_point(mapping = aes(x = black_jail_pop, y = total_jail_pop))
ggplot(data = yearly_black_jail_pop) +
geom_point(mapping = aes(x = black_jail_pop, y = total_jail_pop))
ggplot(data = yearly_black_jail_pop) +
geom_smooth(mapping = aes(x = year, y = black_prop_jail_pop))
yearly_black_jails <- data %>%
group_by(year, black_jail_pop, total_jail_pop) %>%
summarise(black_jail_pop_year = sum(black_jail_pop),
black_prop_jail_pop = mean(prop_black_prison),
jail_pop_year = sum(total_jail_pop), .groups = "drop")
yearly_black_jail_pop <-
data %>%
group_by(year) %>%
summarise(black_jail_pop_year = sum(black_jail_pop, na.rm = TRUE)) %>%
summarise(black_prop_jail_pop = mean(prop_black_prison, na.rm = TRUE)) %>%
summarise(jail_pop_year = sum(total_jail_pop, na.rm = TRUE))
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
yearly_black_jail_pop1 <-
data %>%
group_by(year) %>%
tally(sum(black_jail_pop, na.rm = TRUE), name = "black_jail_pop_year") %>%
tally(mean(prop_black_prison, na.rm = TRUE), name = "black_prop_jail_pop") %>%
tally(sum(total_jail_pop, na.rm = TRUE), name = "jail_pop_year")
yearly_black_jail_pop1 <-
data %>%
group_by(year) %>%
tally(sum(black_jail_pop, na.rm = TRUE), name = "black_jail_pop_year") %>%
tally(mean(prop_black_prison, na.rm = TRUE), name = "black_prop_jail_pop") %>%
tally(sum(total_jail_pop, na.rm = TRUE), name = "jail_pop_year")
View(data)
yearly_black_jail_pop1 <-
data %>%
group_by(year) %>%
tally(sum(black_jail_pop, na.rm = TRUE), name = "black_jail_pop_year") %>%
tally(sum(prop_black_prison, na.rm = TRUE), name = "black_prop_jail_pop") %>%
tally(sum(total_jail_pop, na.rm = TRUE), name = "jail_pop_year")
yearly_black_jails <- data %>%
group_by(year, black_jail_pop, total_jail_pop) %>%
summarise(black_jail_pop_year = sum(black_jail_pop),
black_prop_jail_pop = mean(prop_black_prison),
jail_pop_year = sum(total_jail_pop), .groups = "drop")
data <-
data %>%
mutate(prop_black_prison = black_jail_pop / total_jail_pop)
yearly_black_jail_pop1 <-
data %>%
group_by(year) %>%
tally(sum(black_jail_pop, na.rm = TRUE), name = "black_jail_pop_year") %>%
tally(mean(prop_black_prison, na.rm = TRUE), name = "black_prop_jail_pop") %>%
tally(sum(total_jail_pop, na.rm = TRUE), name = "jail_pop_year")
yearly_black_jail_pop1 <-
data %>%
group_by(year) %>%
tally(sum(black_jail_pop, na.rm = TRUE), name = "black_jail_pop_year") %>%
tally(mean(prop_black_prison, na.rm = TRUE), name = "prop_black_prison") %>%
tally(sum(total_jail_pop, na.rm = TRUE), name = "jail_pop_year")
yearly_black_jail_pop <-
data %>%
group_by(year) %>%
summarise(black_jail_pop_year = sum(black_jail_pop, na.rm = TRUE)) %>%
summarise(black_prop_jail_pop = mean(prop_black_prison, na.rm = TRUE)) %>%
summarise(jail_pop_year = sum(total_jail_pop, na.rm = TRUE))
yearly_black_jail_pop1 <-
data %>%
group_by(year) %>%
tally(sum(black_jail_pop, na.rm = TRUE), name = "black_jail_pop_year",
mean(prop_black_prison, na.rm = TRUE), name = "prop_black_prison",
sum(total_jail_pop, na.rm = TRUE), name = "jail_pop_year")
yearly_black_jail_pop <-
data %>%
group_by(year) %>%
summarise(black_jail_pop_year = sum(black_jail_pop, na.rm = TRUE)) %>%
summarise(black_prop_jail_pop = mean(prop_black_prison, na.rm = TRUE)) %>%
summarise(jail_pop_year = sum(total_jail_pop, na.rm = TRUE))
yearly_black_jails <- data %>%
group_by(year, black_jail_pop, total_jail_pop) %>%
summarise(black_jail_pop_year = sum(black_jail_pop),
black_prop_jail_pop = mean(prop_black_prison),
jail_pop_year = sum(total_jail_pop), .groups = "drop")
yearly_black_jail_pop1 <-
data %>%
group_by(year) %>%
tally((sum(black_jail_pop, na.rm = TRUE), name = "black_jail_pop_year"),
(mean(prop_black_prison, na.rm = TRUE), name = "prop_black_prison"),
(sum(total_jail_pop, na.rm = TRUE), name = "jail_pop_year"))
yearly_black_jail_pop <-
data %>%
group_by(year) %>%
summarise(black_jail_pop_year = sum(black_jail_pop, na.rm = TRUE)) %>%
summarise(black_prop_jail_pop = mean(prop_black_prison, na.rm = TRUE)) %>%
summarise(jail_pop_year = sum(total_jail_pop, na.rm = TRUE))
yearly_black_jails <- data %>%
group_by(year, black_jail_pop, total_jail_pop) %>%
summarise(black_jail_pop_year = sum(black_jail_pop),
black_prop_jail_pop = mean(prop_black_prison),
jail_pop_year = sum(total_jail_pop), .groups = "drop")
View(yearly_black_jails)
### start of analysis.R
# load dplyr, ggplot2 packages
library(dplyr)
library(ggplot2)
# load data
data <- read.csv("https://raw.githubusercontent.com/vera-institute/incarceration-trends/master/incarceration_trends.csv")
### INTRODUCTION + SUMMARY INFORMATION
## 5 relevant values of interest (variables) using DPLYR skills -- describe them
# ideas:
# total prison population nationwide and in each state (compare to below values of
# back prison pop) in the most recent year (2018)
total_prison_pop_nation_recent <-
data %>%
filter(year == max(year, na.rm = TRUE)) %>%
summarize(
total = sum(total_jail_pop, na.rm = TRUE)
) %>%
select(total)
# the total number of black people in prisons nationwide in the most recent year (2018)
total_black_prisons_pop_nation_recent <-
data %>%
filter(year == max(year, na.rm = TRUE)) %>%
summarize(
total = sum(black_jail_pop, na.rm = TRUE)
) %>%
select(total)
# prop black in prisons nation most recent year (2018)
prop_black_prisons_nation <- total_black_prisons_pop_nation_recent / total_prison_pop_nation_recent
# total prison pop in each state
total_prison_pop_state <-
data %>%
group_by(state) %>%
filter(year == max(year, na.rm = TRUE)) %>%
summarize(
total = sum(total_jail_pop, na.rm = TRUE)
) %>%
select(state, total)
# the total number of black people in prisons in each state in the most recent year (2018)
total_black_prisons_pop_state <-
data %>%
group_by(state) %>%
filter(year == max(year, na.rm = TRUE)) %>%
summarize(
total = sum(black_jail_pop, na.rm = TRUE)
) %>%
select(state, total)
# total black population in nation and total us population most recent year (2018)
total_black_pop_nation <-
data %>%
summarize(
total = sum(black_pop_15to64, na.rm = TRUE)
) %>%
pull(total)
total_pop_nation <-
data %>%
summarize(
total = sum(total_pop, na.rm = TRUE)
) %>%
pull(total)
# prop black in nation
prop_black_total = total_black_pop_nation / total_pop_nation
# add column for proportion of black in prison
# this doesn't add a column?
data <-
data %>%
mutate(prop_black_prison = black_jail_pop / total_jail_pop)
## SUMMARY
# black people account for almost 34% of the jail population nationwide but about 5% of
# the total population
# could find highest black prison pop in a state and then compare to total black pop there
### TRENDS OVER TIME CHART
## create a chart that shows a trend over time of your variable/topic (ggplot)
# ideas:
# maybe something like the number of black people in prisons nationwide compared to white
# maybe something to do with the number of people put in prisons because of a certain
# reason (ICE, federal agencies in general)
# black jail population over time
ggplot(data = data) +
geom_smooth(mapping = aes(x = year, y = black_jail_pop))
# prop of black people in jails vs total jail pop
ggplot(data = data) +
geom_smooth(mapping = aes(x = year, y = prop_black_prison))
# CLEAN: the yearly black jail pop since 1970-2018
# TODO: still need to make title and headings using labs()
# new df to hold the two new cols
yearly_black_jail_pop <-
data %>%
group_by(year) %>%
mutate(black_jail_pop_year = sum(black_jail_pop, na.rm = TRUE)) %>%
mutate(black_prop_jail_pop = mean(prop_black_prison, na.rm = TRUE)) %>%
mutate(jail_pop_year = sum(total_jail_pop, na.rm = TRUE))
# with tally - why isn't this working?
yearly_black_jail_pop1 <-
data %>%
group_by(year) %>%
tally(sum(black_jail_pop, na.rm = TRUE), name = "black_jail_pop_year") %>%
tally(mean(prop_black_prison, na.rm = TRUE), name = "black_prop_jail_pop") %>%
tally(sum(total_jail_pop, na.rm = TRUE), name = "jail_pop_year")
ggplot(data = yearly_black_jail_pop) + # put this in a variable to show on rmd file
geom_smooth(mapping = aes(x = year, y = black_jail_pop_year))
# CLEAN: the yearly proportion of black people in jails compared to the total pop
# TODO: further clean up by multiplying the decimals by 100 and renaming ylabelto "percent"
ggplot(data = yearly_black_jail_pop) +
geom_smooth(mapping = aes(x = year, y = black_prop_jail_pop))
### VARIABLE COMPARISON CHART
## create a chart that shows how two different (continuous) variables are related to each
## each other
# ideas:
# could maybe do a bar graph of sorts showing juvenile/adult black populations in prisons
# could compare year to number of black people in prison (scatter plot or line trend)
# compare number of black people in prison to the total prison population by year
# this would be similar to the chart in the last step, but with an added
# total jail pop line (can say that it's similar to the proportion variable but
# it's a more clear way of showing the comparison)
ggplot(data = yearly_black_jail_pop) +
geom_point(mapping = aes(x = black_jail_pop, y = total_jail_pop))
### MAP
## show how a variable is distributed geographically
# ideas:
# make a heatmap of the locations in the US where black people are in prisons
yearly_black_jail_pop <-
data %>%
group_by(year) %>%
mutate(black_jail_pop_year = sum(black_jail_pop, na.rm = TRUE)) %>%
mutate(black_prop_jail_pop = mean(prop_black_prison, na.rm = TRUE)) %>%
mutate(jail_pop_year = sum(total_jail_pop, na.rm = TRUE))
yearly_black_jail_pop1 <-
data %>%
group_by(year) %>%
tally(sum(black_jail_pop, na.rm = TRUE), name = "black_jail_pop_year") %>%
tally(mean(prop_black_prison, na.rm = TRUE), name = "black_prop_jail_pop") %>%
tally(sum(total_jail_pop, na.rm = TRUE), name = "jail_pop_year")
ggplot(data = yearly_black_jail_pop) + # put this in a variable to show on rmd file
geom_smooth(mapping = aes(x = year, y = black_jail_pop_year))
ggplot(data = yearly_black_jail_pop) +
geom_smooth(mapping = aes(x = year, y = black_prop_jail_pop))
ggplot(data = yearly_black_jail_pop) +
geom_point(mapping = aes(x = black_jail_pop, y = total_jail_pop))
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
runApp('Lab_Demo_App.R')
